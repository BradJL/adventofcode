<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>Advent of Code</title>
  <style>
   a:link { text-decoration: underline; color: black; }
   a:visited { text-decoration: underline; color: black; }
   a:hover { text-decoration: underline; color: black; }
   a:active { text-decoration: underline; color: black; }
   body { background-color: silver; }
   blockquote { font-family: Courier, monospace; }
  </style>
 </head>
 <body>
   <p>--- Day 3: Toboggan Trajectory ---</p>
   <p>With the toboggan login problems resolved, you set off toward the airport. While travel by toboggan might be easy, it's certainly not safe: there's very minimal steering and the area is covered in trees. You'll need to see which angles will take you near the fewest trees.</p>
   <p>Due to the local geology, trees in this area only grow on exact integer coordinates in a grid. You make a map (your puzzle input) of the open squares (.) and trees (#) you can see. For example:
    <blockquote>
    ..##.......<br>
    #...#...#..<br>
    .#....#..#.<br>
    ..#.#...#.#<br>
    .#...##..#.<br>
    ..#.##.....<br>
    .#.#.#....#<br>
    .#........#<br>
    #.##...#...<br>
    #...##....#<br>
    .#..#...#.#
    </blockquote></p>
   <p>These aren't the only trees, though; due to something you read about once involving arboreal genetics and biome stability, the same pattern repeats to the right many times:
    <blockquote>
     ..##.........##.........##.........##.........##.........##.......  ---><br>
     #...#...#..#...#...#..#...#...#..#...#...#..#...#...#..#...#...#..<br>
     .#....#..#..#....#..#..#....#..#..#....#..#..#....#..#..#....#..#.<br>
     ..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#<br>
     .#...##..#..#...##..#..#...##..#..#...##..#..#...##..#..#...##..#.<br>
     ..#.##.......#.##.......#.##.......#.##.......#.##.......#.##.....  ---><br>
     .#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#<br>
     .#........#.#........#.#........#.#........#.#........#.#........#<br>
     #.##...#...#.##...#...#.##...#...#.##...#...#.##...#...#.##...#...<br>
     #...##....##...##....##...##....##...##....##...##....##...##....#<br>
     .#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#.#..#...#.#  --->
    </blockquote></p>
   <p>You start on the open square (.) in the top-left corner and need to reach the bottom (below the bottom-most row on your map).</p>
   <p>The toboggan can only follow a few specific slopes (you opted for a cheaper model that prefers rational numbers); start by counting all the trees you would encounter for the slope right 3, down 1:</p>
   <p>From your starting position at the top-left, check the position that is right 3 and down 1. Then, check the position that is right 3 and down 1 from there, and so on until you go past the bottom of the map.</p>
   <p>The locations you'd check in the above example are marked here with O where there was an open square and X where there was a tree:
    <blockquote>
     ..##.........##.........##.........##.........##.........##.......  ---><br>
     #..O#...#..#...#...#..#...#...#..#...#...#..#...#...#..#...#...#..<br>
     .#....X..#..#....#..#..#....#..#..#....#..#..#....#..#..#....#..#.<br>
     ..#.#...#O#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#..#.#...#.#<br>
     .#...##..#..X...##..#..#...##..#..#...##..#..#...##..#..#...##..#.<br>
     ..#.##.......#.X#.......#.##.......#.##.......#.##.......#.##.....  ---><br>
     .#.#.#....#.#.#.#.O..#.#.#.#....#.#.#.#....#.#.#.#....#.#.#.#....#<br>
     .#........#.#........X.#........#.#........#.#........#.#........#<br>
     #.##...#...#.##...#...#.X#...#...#.##...#...#.##...#...#.##...#...<br>
     #...##....##...##....##...#X....##...##....##...##....##...##....#<br>
     .#..#...#.#.#..#...#.#.#..#...X.#.#..#...#.#.#..#...#.#.#..#...#.#  ---><br>
    </blockquote>
   </p>
   <p>In this example, traversing the map using this slope would cause you to encounter 7 trees.</p>
   <p>Starting at the top-left corner of your map and following a slope of right 3 and down 1, how many trees would you encounter?</p>
  <p>To begin, <a href="input.txt">get your puzzle input</a>.</p>
  <div id="answer">Answer: <span></span></div>
  <hr>
  <p>The first half of this puzzle is complete! It provides one gold star: *</p>
  <hr>
  <p>--- Part Two ---</p>
  <p>Time to check the rest of the slopes - you need to minimize the probability of a sudden arboreal stop, after all.</p>
  <p>Determine the number of trees you would encounter if, for each of the following slopes, you start at the top-left corner and traverse the map all the way to the bottom:
   <blockquote>
    Right 1, down 1.
    Right 3, down 1. (This is the slope you already checked.)
    Right 5, down 1.
    Right 7, down 1.
    Right 1, down 2.
   </blockquote>
  </p>
  <p>In the above example, these slopes would find 2, 7, 3, 4, and 2 tree(s) respectively; multiplied together, these produce the answer 336.</p>
  <p>What do you get if you multiply together the number of trees encountered on each of the listed slopes?</p>
  <div id="answer2">Answer: <span></span></div>
  <hr>
  <p>Both parts of this puzzle are complete! They provide two gold stars: **</p>
  <hr>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
   let row = 0;
   let column = 0; // column3_1
   let column1_1 = 0;
   let column5_1 = 0;
   let column7_1 = 0;
   let column1_2 = 0;

   let encounteredTrees = 0;
   let encounteredTrees1_1 = 0;
   let encounteredTrees5_1 = 0;
   let encounteredTrees7_1 = 0;
   let encounteredTrees1_2 = 0;
   
   function countEncounteredTrees(value, index, array) {
    if( value == null || value == "" || value == undefined ) return;
    
    if( value[column] == "#" ){ ++encounteredTrees; }
    if( value[column1_1] == "#" ){ ++encounteredTrees1_1; }
    if( value[column5_1] == "#" ){ ++encounteredTrees5_1; }
    if( value[column7_1] == "#" ){ ++encounteredTrees7_1; }
    if( row % 2 == 0 ){
     if( value[column1_2] == "#" ){ ++encounteredTrees1_2; }
     column1_2 = (column1_2 + 1) % value.length;
    }
    
    column = (column + 3) % value.length;
    column1_1 = (column1_1 + 1) % value.length;
    column5_1 = (column5_1 + 5) % value.length;
    column7_1 = (column7_1 + 7) % value.length;
    ++row;
   }
   $('#answer span').text('Calculating...');
   $.get( "input.txt", function( data ) {
    data.split(/\r?\n/).forEach(countEncounteredTrees);
    $('#answer span').text(encounteredTrees);
    $('#answer2 span').text(encounteredTrees1_1 + " * " + encounteredTrees + " * " + encounteredTrees5_1 + " * " + encounteredTrees7_1 + " * " + encounteredTrees1_2 + " = " + (encounteredTrees1_1 * encounteredTrees * encounteredTrees5_1 * encounteredTrees7_1 * encounteredTrees1_2));
   });
  </script>
 </body>
</html>
